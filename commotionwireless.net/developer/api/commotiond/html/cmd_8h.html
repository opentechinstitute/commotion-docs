---
layout: default
title: API Reference - commotiond
site_section: developers
categories: 
created: 2014-06-06 13:22:04.584366
changed: 2014-06-06 13:22:04.584366
post_author: Commotion
lang: en
---
<div id="doxygen">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part --> 
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cmd.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>a mechanism for registering and controlling display of commands  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="obj_8h_source.html">obj.h</a>&quot;</code><br />
</div>
<p><a href="cmd_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structco__cmd__t.html">co_cmd_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">a struct containing all the relevant information for a specific command  <a href="structco__cmd__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a489bc5be0b3d235e565c2d6d087b6f46"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a489bc5be0b3d235e565c2d6d087b6f46"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD</b>(N)&#160;&#160;&#160;static int cmd_##N(<a class="el" href="structco__obj__t.html">co_obj_t</a> *self, <a class="el" href="structco__obj__t.html">co_obj_t</a> **output, <a class="el" href="structco__obj__t.html">co_obj_t</a> *params)</td></tr>
<tr class="separator:a489bc5be0b3d235e565c2d6d087b6f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e3b95848920e23ef5cbb477f061129f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e3b95848920e23ef5cbb477f061129f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_REGISTER</b>(N, U, D)&#160;&#160;&#160;co_cmd_register(#N, sizeof(#N), U, sizeof(U), D, sizeof(D), cmd_##N )</td></tr>
<tr class="separator:a7e3b95848920e23ef5cbb477f061129f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4612506956aa26ad21479070ffe18232"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4612506956aa26ad21479070ffe18232"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_OUTPUT</b>(K, V)&#160;&#160;&#160;if(*output == NULL) *output = co_tree16_create(); <a class="el" href="tree_8h.html#a1693a84a751373827f76a7383322e105">co_tree_insert</a>(*output, K, sizeof(K), V)</td></tr>
<tr class="separator:a4612506956aa26ad21479070ffe18232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6b775b5ab1f1d7ce4a2ce2cf58494e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5c6b775b5ab1f1d7ce4a2ce2cf58494e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HOOK</b>(N)&#160;&#160;&#160;static int hook_##N##(<a class="el" href="structco__obj__t.html">co_obj_t</a> *self, <a class="el" href="structco__obj__t.html">co_obj_t</a> **output, <a class="el" href="structco__obj__t.html">co_obj_t</a> *params)</td></tr>
<tr class="separator:a5c6b775b5ab1f1d7ce4a2ce2cf58494e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9227caf6bbc6840b804ca59e141d2e23"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9227caf6bbc6840b804ca59e141d2e23"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HOOK_REGISTER</b>(N, C)&#160;&#160;&#160;<a class="el" href="cmd_8h.html#ab5c9cbfe29ece8f375bc8c13d959ddb7">co_cmd_hook_str</a>(N, sizeof(N), hook_##N)</td></tr>
<tr class="separator:a9227caf6bbc6840b804ca59e141d2e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a10872f0e0d6872d721c1d9579c248433"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10872f0e0d6872d721c1d9579c248433"></a>
typedef struct <a class="el" href="structco__cmd__t.html">co_cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>co_cmd_t</b></td></tr>
<tr class="separator:a10872f0e0d6872d721c1d9579c248433"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a73b87177832e35906ba391c5b931a875"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73b87177832e35906ba391c5b931a875"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>co_cmds_shutdown</b> (void)</td></tr>
<tr class="separator:a73b87177832e35906ba391c5b931a875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a347738d75e2ff90a62170c13933c854b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a347738d75e2ff90a62170c13933c854b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>co_cmds_init</b> (const size_t index_size)</td></tr>
<tr class="separator:a347738d75e2ff90a62170c13933c854b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab05921459990c0ad97b04843078a1e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acab05921459990c0ad97b04843078a1e"></a>
struct <a class="el" href="structco__cmd__t.html">co_cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>__attribute__</b> ((packed))</td></tr>
<tr class="separator:acab05921459990c0ad97b04843078a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad842ec1fdbdc69d81a073593e7b342ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad842ec1fdbdc69d81a073593e7b342ab"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>co_cmd_register</b> (const char *<a class="el" href="profile_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a>, const size_t nlen, const char *<a class="el" href="cmd_8h.html#ace2987d249e38e296e66b62c88c629f9">usage</a>, const size_t ulen, const char *<a class="el" href="cmd_8h.html#ad8dfe6da143614c91598ec35c35bcc4f">desc</a>, const size_t dlen, co_cb_t handler)</td></tr>
<tr class="separator:ad842ec1fdbdc69d81a073593e7b342ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e3db670f8a4187b7e198804c2e8dd6a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#a3e3db670f8a4187b7e198804c2e8dd6a">co_cmd_exec</a> (<a class="el" href="structco__obj__t.html">co_obj_t</a> *key, <a class="el" href="structco__obj__t.html">co_obj_t</a> **output, <a class="el" href="structco__obj__t.html">co_obj_t</a> *param)</td></tr>
<tr class="memdesc:a3e3db670f8a4187b7e198804c2e8dd6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">executes a command by running the function linked to in the command struct  <a href="#a3e3db670f8a4187b7e198804c2e8dd6a">More...</a><br /></td></tr>
<tr class="separator:a3e3db670f8a4187b7e198804c2e8dd6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49133510a4fcf530f76114c7f14e0243"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#a49133510a4fcf530f76114c7f14e0243">co_cmd_usage</a> (<a class="el" href="structco__obj__t.html">co_obj_t</a> *key)</td></tr>
<tr class="memdesc:a49133510a4fcf530f76114c7f14e0243"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns command usage format  <a href="#a49133510a4fcf530f76114c7f14e0243">More...</a><br /></td></tr>
<tr class="separator:a49133510a4fcf530f76114c7f14e0243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f5016011836ec0433eb32e9fe1af59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#a20f5016011836ec0433eb32e9fe1af59">co_cmd_desc</a> (<a class="el" href="structco__obj__t.html">co_obj_t</a> *key)</td></tr>
<tr class="memdesc:a20f5016011836ec0433eb32e9fe1af59"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns command description (what the command does)  <a href="#a20f5016011836ec0433eb32e9fe1af59">More...</a><br /></td></tr>
<tr class="separator:a20f5016011836ec0433eb32e9fe1af59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fc07bfc4364172dccd22da5bdc6d77"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#a47fc07bfc4364172dccd22da5bdc6d77">co_cmd_hook</a> (const <a class="el" href="structco__obj__t.html">co_obj_t</a> *key, <a class="el" href="structco__obj__t.html">co_obj_t</a> *cb)</td></tr>
<tr class="memdesc:a47fc07bfc4364172dccd22da5bdc6d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">hooks callback function into a command  <a href="#a47fc07bfc4364172dccd22da5bdc6d77">More...</a><br /></td></tr>
<tr class="separator:a47fc07bfc4364172dccd22da5bdc6d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c9cbfe29ece8f375bc8c13d959ddb7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#ab5c9cbfe29ece8f375bc8c13d959ddb7">co_cmd_hook_str</a> (const char *key, const size_t klen, <a class="el" href="structco__obj__t.html">co_obj_t</a> *cb)</td></tr>
<tr class="memdesc:ab5c9cbfe29ece8f375bc8c13d959ddb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">hooks callback function into a command  <a href="#ab5c9cbfe29ece8f375bc8c13d959ddb7">More...</a><br /></td></tr>
<tr class="separator:ab5c9cbfe29ece8f375bc8c13d959ddb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08ba46875554da0d82312ef3e10083f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#ae08ba46875554da0d82312ef3e10083f">co_cmd_process</a> (co_iter_t iter, void *context)</td></tr>
<tr class="memdesc:ae08ba46875554da0d82312ef3e10083f"><td class="mdescLeft">&#160;</td><td class="mdescRight">process all registered commands with given iterator  <a href="#ae08ba46875554da0d82312ef3e10083f">More...</a><br /></td></tr>
<tr class="separator:ae08ba46875554da0d82312ef3e10083f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa20afbf3f0a782bb4dea4da22df275a3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa20afbf3f0a782bb4dea4da22df275a3"></a>
<a class="el" href="structco__obj__t.html">co_obj_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>_header</b></td></tr>
<tr class="separator:aa20afbf3f0a782bb4dea4da22df275a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05de11e79f277be86c869a1fc6a204bd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a05de11e79f277be86c869a1fc6a204bd"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>_exttype</b></td></tr>
<tr class="separator:a05de11e79f277be86c869a1fc6a204bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ff8177a0b8e2c9f9c18bd0cb34e65f8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ff8177a0b8e2c9f9c18bd0cb34e65f8"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>_len</b></td></tr>
<tr class="separator:a5ff8177a0b8e2c9f9c18bd0cb34e65f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17bc8f9abe09260e3bc9e737c92790b4"><td class="memItemLeft" align="right" valign="top">co_cb_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#a17bc8f9abe09260e3bc9e737c92790b4">exec</a></td></tr>
<tr class="separator:a17bc8f9abe09260e3bc9e737c92790b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a842efb72cde7678fc8a8162084b327ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a></td></tr>
<tr class="separator:a842efb72cde7678fc8a8162084b327ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2987d249e38e296e66b62c88c629f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#ace2987d249e38e296e66b62c88c629f9">usage</a></td></tr>
<tr class="separator:ace2987d249e38e296e66b62c88c629f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8dfe6da143614c91598ec35c35bcc4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cmd_8h.html#ad8dfe6da143614c91598ec35c35bcc4f">desc</a></td></tr>
<tr class="separator:ad8dfe6da143614c91598ec35c35bcc4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8afcbc64e6e71b95846d87417c0e520"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af8afcbc64e6e71b95846d87417c0e520"></a>
<a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>hooks</b></td></tr>
<tr class="separator:af8afcbc64e6e71b95846d87417c0e520"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>a mechanism for registering and controlling display of commands </p>
<dl class="section author"><dt>Author</dt><dd>Josh King (jheretic), <a href="#" onclick="location.href='mai'+'lto:'+'jki'+'ng'+'@ch'+'am'+'ban'+'a.'+'net'; return false;">jking<span style="display: none;">.nosp@m.</span>@cha<span style="display: none;">.nosp@m.</span>mbana<span style="display: none;">.nosp@m.</span>.net</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a20f5016011836ec0433eb32e9fe1af59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structco__obj__t.html">co_obj_t</a>* co_cmd_desc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns command description (what the command does) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the name of the command </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find()</a>, and <a class="el" href="structco__cmd__t.html#a97bb000840489763d726b1e81181a5f5">co_cmd_t::desc</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">char</span> *kstr = NULL;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">size_t</span> klen = co_obj_data(&amp;kstr, key);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="structco__cmd__t.html">co_cmd_t</a> *cmd = (<a class="code" href="structco__cmd__t.html">co_cmd_t</a> *)<a class="code" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a>(_cmds, kstr, klen - 1);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  CHECK((cmd != NULL), <span class="stringliteral">&quot;No such command!&quot;</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">return</span> cmd-&gt;<a class="code" href="structco__cmd__t.html#a97bb000840489763d726b1e81181a5f5">desc</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;error:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="ttc" id="structco__cmd__t_html_a97bb000840489763d726b1e81181a5f5"><div class="ttname"><a href="structco__cmd__t.html#a97bb000840489763d726b1e81181a5f5">co_cmd_t::desc</a></div><div class="ttdeci">co_obj_t * desc</div><div class="ttdef"><b>Definition:</b> cmd.h:68</div></div>
<div class="ttc" id="tree_8c_html_a59bc6048d3c52d982f8d265d5ff6a674"><div class="ttname"><a href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a></div><div class="ttdeci">co_obj_t * co_tree_find(const co_obj_t *root, const char *key, const size_t klen)</div><div class="ttdoc">return value from given tree that corresponds to key </div><div class="ttdef"><b>Definition:</b> tree.c:173</div></div>
<div class="ttc" id="structco__cmd__t_html"><div class="ttname"><a href="structco__cmd__t.html">co_cmd_t</a></div><div class="ttdoc">a struct containing all the relevant information for a specific command </div><div class="ttdef"><b>Definition:</b> cmd.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e3db670f8a4187b7e198804c2e8dd6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int co_cmd_exec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> **&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>executes a command by running the function linked to in the command struct </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the name of the command </td></tr>
    <tr><td class="paramname">output</td><td>return object of command </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find()</a>, and <a class="el" href="structco__cmd__t.html#add04e691f5afa12a19ecc870860d9e82">co_cmd_t::exec</a>.</p>

<p>Referenced by <a class="el" href="daemon_8c.html#af68a09cb7d1ba46ac46187c590dc6468">dispatcher_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordtype">char</span> *kstr = NULL;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">size_t</span> klen = co_obj_data(&amp;kstr, key);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="structco__cmd__t.html">co_cmd_t</a> *cmd = (<a class="code" href="structco__cmd__t.html">co_cmd_t</a> *)<a class="code" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a>(_cmds, kstr, klen - 1);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  CHECK((cmd != NULL), <span class="stringliteral">&quot;No such command!&quot;</span>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">return</span> cmd-&gt;<a class="code" href="structco__cmd__t.html#add04e691f5afa12a19ecc870860d9e82">exec</a>((<a class="code" href="structco__obj__t.html">co_obj_t</a> *)cmd, output, param);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;error:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="ttc" id="structco__obj__t_html"><div class="ttname"><a href="structco__obj__t.html">co_obj_t</a></div><div class="ttdef"><b>Definition:</b> obj.h:131</div></div>
<div class="ttc" id="structco__cmd__t_html_add04e691f5afa12a19ecc870860d9e82"><div class="ttname"><a href="structco__cmd__t.html#add04e691f5afa12a19ecc870860d9e82">co_cmd_t::exec</a></div><div class="ttdeci">co_cb_t exec</div><div class="ttdef"><b>Definition:</b> cmd.h:65</div></div>
<div class="ttc" id="tree_8c_html_a59bc6048d3c52d982f8d265d5ff6a674"><div class="ttname"><a href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a></div><div class="ttdeci">co_obj_t * co_tree_find(const co_obj_t *root, const char *key, const size_t klen)</div><div class="ttdoc">return value from given tree that corresponds to key </div><div class="ttdef"><b>Definition:</b> tree.c:173</div></div>
<div class="ttc" id="structco__cmd__t_html"><div class="ttname"><a href="structco__cmd__t.html">co_cmd_t</a></div><div class="ttdoc">a struct containing all the relevant information for a specific command </div><div class="ttdef"><b>Definition:</b> cmd.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47fc07bfc4364172dccd22da5bdc6d77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int co_cmd_hook </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>hooks callback function into a command </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the name of the command </td></tr>
    <tr><td class="paramname">cb</td><td>reference to callback function </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="list_8c.html#ada7536773e05cf3dcb33ab73ac2ef84e">co_list_append()</a>, and <a class="el" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find()</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordtype">char</span> *kstr = NULL;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">size_t</span> klen = co_obj_data(&amp;kstr, key);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="structco__cmd__t.html">co_cmd_t</a> *cmd = (<a class="code" href="structco__cmd__t.html">co_cmd_t</a> *)<a class="code" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a>(_cmds, kstr, klen);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  CHECK((cmd != NULL), <span class="stringliteral">&quot;No such command!&quot;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span>(cmd-&gt;hooks == NULL)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    cmd-&gt;hooks = co_tree16_create();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  CHECK(<a class="code" href="list_8c.html#ada7536773e05cf3dcb33ab73ac2ef84e">co_list_append</a>(cmd-&gt;hooks, cb), <span class="stringliteral">&quot;Failed to add hook to command.&quot;</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;error:</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="ttc" id="list_8c_html_ada7536773e05cf3dcb33ab73ac2ef84e"><div class="ttname"><a href="list_8c.html#ada7536773e05cf3dcb33ab73ac2ef84e">co_list_append</a></div><div class="ttdeci">int co_list_append(co_obj_t *list, co_obj_t *new_obj)</div><div class="ttdoc">insert new item at end of list </div><div class="ttdef"><b>Definition:</b> list.c:425</div></div>
<div class="ttc" id="tree_8c_html_a59bc6048d3c52d982f8d265d5ff6a674"><div class="ttname"><a href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a></div><div class="ttdeci">co_obj_t * co_tree_find(const co_obj_t *root, const char *key, const size_t klen)</div><div class="ttdoc">return value from given tree that corresponds to key </div><div class="ttdef"><b>Definition:</b> tree.c:173</div></div>
<div class="ttc" id="structco__cmd__t_html"><div class="ttname"><a href="structco__cmd__t.html">co_cmd_t</a></div><div class="ttdoc">a struct containing all the relevant information for a specific command </div><div class="ttdef"><b>Definition:</b> cmd.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab5c9cbfe29ece8f375bc8c13d959ddb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int co_cmd_hook_str </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>klen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>hooks callback function into a command </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the name of the command </td></tr>
    <tr><td class="paramname">klen</td><td>length of key string </td></tr>
    <tr><td class="paramname">cb</td><td>reference to callback function </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="list_8c.html#ada7536773e05cf3dcb33ab73ac2ef84e">co_list_append()</a>, and <a class="el" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find()</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="structco__cmd__t.html">co_cmd_t</a> *cmd = (<a class="code" href="structco__cmd__t.html">co_cmd_t</a> *)<a class="code" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a>(_cmds, key, klen);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  CHECK((cmd != NULL), <span class="stringliteral">&quot;No such command!&quot;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span>(cmd-&gt;hooks == NULL)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    cmd-&gt;hooks = co_tree16_create();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  CHECK(<a class="code" href="list_8c.html#ada7536773e05cf3dcb33ab73ac2ef84e">co_list_append</a>(cmd-&gt;hooks, cb), <span class="stringliteral">&quot;Failed to add hook to command.&quot;</span>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;error:</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="ttc" id="list_8c_html_ada7536773e05cf3dcb33ab73ac2ef84e"><div class="ttname"><a href="list_8c.html#ada7536773e05cf3dcb33ab73ac2ef84e">co_list_append</a></div><div class="ttdeci">int co_list_append(co_obj_t *list, co_obj_t *new_obj)</div><div class="ttdoc">insert new item at end of list </div><div class="ttdef"><b>Definition:</b> list.c:425</div></div>
<div class="ttc" id="tree_8c_html_a59bc6048d3c52d982f8d265d5ff6a674"><div class="ttname"><a href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a></div><div class="ttdeci">co_obj_t * co_tree_find(const co_obj_t *root, const char *key, const size_t klen)</div><div class="ttdoc">return value from given tree that corresponds to key </div><div class="ttdef"><b>Definition:</b> tree.c:173</div></div>
<div class="ttc" id="structco__cmd__t_html"><div class="ttname"><a href="structco__cmd__t.html">co_cmd_t</a></div><div class="ttdoc">a struct containing all the relevant information for a specific command </div><div class="ttdef"><b>Definition:</b> cmd.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae08ba46875554da0d82312ef3e10083f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int co_cmd_process </td>
          <td>(</td>
          <td class="paramtype">co_iter_t&#160;</td>
          <td class="paramname"><em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>process all registered commands with given iterator </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>iterator function reference </td></tr>
    <tr><td class="paramname">context</td><td>other parameters passed to iterator </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="tree_8c.html#a85f5ae243dc4c77813da2a99d189b69c">co_tree_process()</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  CHECK(<a class="code" href="tree_8c.html#a85f5ae243dc4c77813da2a99d189b69c">co_tree_process</a>(_cmds, iter, context), <span class="stringliteral">&quot;Failed to process commands.&quot;</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;error:</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="ttc" id="tree_8c_html_a85f5ae243dc4c77813da2a99d189b69c"><div class="ttname"><a href="tree_8c.html#a85f5ae243dc4c77813da2a99d189b69c">co_tree_process</a></div><div class="ttdeci">int co_tree_process(co_obj_t *tree, const co_iter_t iter, void *context)</div><div class="ttdoc">process tree with given iterator function </div><div class="ttdef"><b>Definition:</b> tree.c:555</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49133510a4fcf530f76114c7f14e0243"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structco__obj__t.html">co_obj_t</a>* co_cmd_usage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns command usage format </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>command name </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find()</a>, and <a class="el" href="structco__cmd__t.html#af73f4d544979225b4f5ef4fe22f855ef">co_cmd_t::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordtype">char</span> *kstr = NULL;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordtype">size_t</span> klen = co_obj_data(&amp;kstr, key);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="structco__cmd__t.html">co_cmd_t</a> *cmd = (<a class="code" href="structco__cmd__t.html">co_cmd_t</a> *)<a class="code" href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a>(_cmds, kstr, klen - 1);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  CHECK((cmd != NULL), <span class="stringliteral">&quot;No such command!&quot;</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">return</span> cmd-&gt;<a class="code" href="structco__cmd__t.html#af73f4d544979225b4f5ef4fe22f855ef">usage</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;error:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="ttc" id="tree_8c_html_a59bc6048d3c52d982f8d265d5ff6a674"><div class="ttname"><a href="tree_8c.html#a59bc6048d3c52d982f8d265d5ff6a674">co_tree_find</a></div><div class="ttdeci">co_obj_t * co_tree_find(const co_obj_t *root, const char *key, const size_t klen)</div><div class="ttdoc">return value from given tree that corresponds to key </div><div class="ttdef"><b>Definition:</b> tree.c:173</div></div>
<div class="ttc" id="structco__cmd__t_html_af73f4d544979225b4f5ef4fe22f855ef"><div class="ttname"><a href="structco__cmd__t.html#af73f4d544979225b4f5ef4fe22f855ef">co_cmd_t::usage</a></div><div class="ttdeci">co_obj_t * usage</div><div class="ttdef"><b>Definition:</b> cmd.h:67</div></div>
<div class="ttc" id="structco__cmd__t_html"><div class="ttname"><a href="structco__cmd__t.html">co_cmd_t</a></div><div class="ttdoc">a struct containing all the relevant information for a specific command </div><div class="ttdef"><b>Definition:</b> cmd.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad8dfe6da143614c91598ec35c35bcc4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structco__obj__t.html">co_obj_t</a>* desc</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>description </p>

<p>Referenced by <a class="el" href="crypto_8h.html#a699ccad43ec5415b695b70b74af369cf">serval_crypto_register()</a>.</p>

</div>
</div>
<a class="anchor" id="a17bc8f9abe09260e3bc9e737c92790b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">co_cb_t exec</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pointer to the command's function </p>

<p>Referenced by <a class="el" href="process_8h.html#abbc95e23ade68761f20659fed18dc1e0">co_process_start()</a>.</p>

</div>
</div>
<a class="anchor" id="a842efb72cde7678fc8a8162084b327ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structco__obj__t.html">co_obj_t</a>* name</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>command name </p>

<p>Referenced by <a class="el" href="olsrd_8h.html#a81d06fa13f5f770648b1d397a45425a3">co_olsrd_print_conf()</a>, <a class="el" href="olsrd_8h.html#a61065305edbe37e889d398373b27c1f5">co_olsrd_remove_iface()</a>, <a class="el" href="crypto_8h.html#a2b5d79b249c94ce4dd6f025280dda2fb">olsrd_mdp_register()</a>, <a class="el" href="crypto_8h.html#a6c8facf941938973d0d6a5f14a32ca9a">olsrd_mdp_sign_register()</a>, and <a class="el" href="crypto_8h.html#a699ccad43ec5415b695b70b74af369cf">serval_crypto_register()</a>.</p>

</div>
</div>
<a class="anchor" id="ace2987d249e38e296e66b62c88c629f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structco__obj__t.html">co_obj_t</a>* usage</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>usage syntax </p>

<p>Referenced by <a class="el" href="crypto_8h.html#a699ccad43ec5415b695b70b74af369cf">serval_crypto_register()</a>.</p>

</div>
</div>
</div><!-- contents -->

<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 6 2014 13:22:05 for commotiond by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
<script type="text/javascript" src="dynsections.js"></script>
</div>
