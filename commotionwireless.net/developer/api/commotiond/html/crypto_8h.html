---
layout: default
title: API Reference - commotiond
site_section: developers
categories: 
created: 2014-06-06 13:22:04.584366
changed: 2014-06-06 13:22:04.584366
post_author: Commotion
lang: en
---
<div id="doxygen">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part --> 
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_38c8d24aef3972a7f87b834274e76e31.html">plugins</a></li><li class="navelem"><a class="el" href="dir_0a9a372aadd43cc6ec1f168ac17a5ec6.html">serval-dna</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">crypto.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>serval-dna plugin functionality for signing/verifying using Serval keys  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;serval.h&gt;</code><br />
<code>#include &quot;<a class="el" href="obj_8h_source.html">obj.h</a>&quot;</code><br />
</div>
<p><a href="crypto_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a76136f898f9638b2cb096d8e4e710edb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76136f898f9638b2cb096d8e4e710edb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KEYRING_PIN</b>&#160;&#160;&#160;NULL</td></tr>
<tr class="separator:a76136f898f9638b2cb096d8e4e710edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6821bafc3c88dfb2e433a095df9940c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6821bafc3c88dfb2e433a095df9940c6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BUF_SIZE</b>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a6821bafc3c88dfb2e433a095df9940c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b53bee2c85ac35a995a167191fe893"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8b53bee2c85ac35a995a167191fe893"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>crypto_sign_PUBLICKEYBYTES</b>&#160;&#160;&#160;crypto_sign_edwards25519sha512batch_PUBLICKEYBYTES</td></tr>
<tr class="separator:ae8b53bee2c85ac35a995a167191fe893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c0868698228f40e7234e9bac2772b9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4c0868698228f40e7234e9bac2772b9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>crypto_sign_SECRETKEYBYTES</b>&#160;&#160;&#160;crypto_sign_edwards25519sha512batch_SECRETKEYBYTES</td></tr>
<tr class="separator:ad4c0868698228f40e7234e9bac2772b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacc10e1cdb7c84ed08f64a1391c6da15"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aacc10e1cdb7c84ed08f64a1391c6da15"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SIGNATURE_BYTES</b>&#160;&#160;&#160;crypto_sign_edwards25519sha512batch_BYTES</td></tr>
<tr class="separator:aacc10e1cdb7c84ed08f64a1391c6da15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a5cc8150befa9abc3f3adc1dcc9c8601b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5cc8150befa9abc3f3adc1dcc9c8601b"></a>
typedef struct <a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a>&#160;</td><td class="memItemRight" valign="bottom"><b>svl_crypto_ctx</b></td></tr>
<tr class="separator:a5cc8150befa9abc3f3adc1dcc9c8601b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a08f6db86179aeb589db6edd6f8bdbecf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08f6db86179aeb589db6edd6f8bdbecf"></a>
<a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>svl_crypto_ctx_new</b> (void)</td></tr>
<tr class="separator:a08f6db86179aeb589db6edd6f8bdbecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3678ab3a3a249d33c6b6667757635a80"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3678ab3a3a249d33c6b6667757635a80"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>svl_crypto_ctx_free</b> (<a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *ctx)</td></tr>
<tr class="separator:a3678ab3a3a249d33c6b6667757635a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699ccad43ec5415b695b70b74af369cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto_8h.html#a699ccad43ec5415b695b70b74af369cf">serval_crypto_register</a> (void)</td></tr>
<tr class="separator:a699ccad43ec5415b695b70b74af369cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5d79b249c94ce4dd6f025280dda2fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto_8h.html#a2b5d79b249c94ce4dd6f025280dda2fb">olsrd_mdp_register</a> (void)</td></tr>
<tr class="separator:a2b5d79b249c94ce4dd6f025280dda2fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8facf941938973d0d6a5f14a32ca9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto_8h.html#a6c8facf941938973d0d6a5f14a32ca9a">olsrd_mdp_sign_register</a> (void)</td></tr>
<tr class="separator:a6c8facf941938973d0d6a5f14a32ca9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933aa5cb596d327a7aaf1a0d21124280"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a933aa5cb596d327a7aaf1a0d21124280"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>serval_crypto_handler</b> (<a class="el" href="structco__obj__t.html">co_obj_t</a> *self, <a class="el" href="structco__obj__t.html">co_obj_t</a> **output, <a class="el" href="structco__obj__t.html">co_obj_t</a> *params)</td></tr>
<tr class="separator:a933aa5cb596d327a7aaf1a0d21124280"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43b9f1204773f5d3652313677483baf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa43b9f1204773f5d3652313677483baf"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>olsrd_mdp_init</b> (<a class="el" href="structco__obj__t.html">co_obj_t</a> *self, <a class="el" href="structco__obj__t.html">co_obj_t</a> **output, <a class="el" href="structco__obj__t.html">co_obj_t</a> *params)</td></tr>
<tr class="separator:aa43b9f1204773f5d3652313677483baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48f47676409eabe9da89f5df565fe38"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="crypto_8h.html#ab48f47676409eabe9da89f5df565fe38">olsrd_mdp_sign</a> (<a class="el" href="structco__obj__t.html">co_obj_t</a> *self, <a class="el" href="structco__obj__t.html">co_obj_t</a> **output, <a class="el" href="structco__obj__t.html">co_obj_t</a> *params)</td></tr>
<tr class="separator:ab48f47676409eabe9da89f5df565fe38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd0be0562590d0272942461fb637873f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd0be0562590d0272942461fb637873f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>serval_open_keyring</b> (<a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *ctx)</td></tr>
<tr class="separator:acd0be0562590d0272942461fb637873f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f8037c57442bd18e4e86f02a8c496b3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f8037c57442bd18e4e86f02a8c496b3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>serval_init_keyring</b> (<a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *ctx)</td></tr>
<tr class="separator:a7f8037c57442bd18e4e86f02a8c496b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee1dd59c313dab3bef78ad1b79aa3efb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee1dd59c313dab3bef78ad1b79aa3efb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>cmd_serval_sign</b> (<a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *ctx)</td></tr>
<tr class="separator:aee1dd59c313dab3bef78ad1b79aa3efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72ef51d1d435317955869fef39b6ae54"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72ef51d1d435317955869fef39b6ae54"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>cmd_serval_verify</b> (<a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *ctx)</td></tr>
<tr class="separator:a72ef51d1d435317955869fef39b6ae54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a433c7ad11da8052d3d7bbbba0a82587b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a433c7ad11da8052d3d7bbbba0a82587b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>serval_verify_client</b> (<a class="el" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *ctx)</td></tr>
<tr class="separator:a433c7ad11da8052d3d7bbbba0a82587b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>serval-dna plugin functionality for signing/verifying using Serval keys </p>
<dl class="section author"><dt>Author</dt><dd>Dan Staples (dismantl), <a href="#" onclick="location.href='mai'+'lto:'+'dan'+'st'+'apl'+'es'+'@op'+'en'+'tec'+'hi'+'nst'+'it'+'ute'+'.o'+'rg'; return false;">danst<span style="display: none;">.nosp@m.</span>aple<span style="display: none;">.nosp@m.</span>s@ope<span style="display: none;">.nosp@m.</span>ntec<span style="display: none;">.nosp@m.</span>hinst<span style="display: none;">.nosp@m.</span>itut<span style="display: none;">.nosp@m.</span>e.org</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2b5d79b249c94ce4dd6f025280dda2fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int olsrd_mdp_register </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>name: mdp-init param[0] &lt;required&gt;: &lt;keyring_path&gt; (co_str16_t) param[1] &lt;required&gt;: &lt;SID&gt; (co_str8_t)</p>

<p>References <a class="el" href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">   * name: mdp-init</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">   * param[0] &lt;required&gt;: &lt;keyring_path&gt; (co_str16_t)</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">   * param[1] &lt;required&gt;: &lt;SID&gt; (co_str8_t)</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a>[] = <span class="stringliteral">&quot;mdp-init&quot;</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  CHECK(co_cmd_register(name, <span class="keyword">sizeof</span>(name), <span class="stringliteral">&quot;&quot;</span>, 1, <span class="stringliteral">&quot;&quot;</span>, 1, olsrd_mdp_init), <span class="stringliteral">&quot;Failed to register command&quot;</span>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;error:</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;}</div>
<div class="ttc" id="cmd_8h_html_a842efb72cde7678fc8a8162084b327ea"><div class="ttname"><a href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a></div><div class="ttdeci">co_obj_t * name</div><div class="ttdef"><b>Definition:</b> cmd.h:60</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab48f47676409eabe9da89f5df565fe38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int olsrd_mdp_sign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> **&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structco__obj__t.html">co_obj_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>skipping some error checking for performance reasons </p>

<p>References <a class="el" href="list_8c.html#a647ff4c713547b65d3fa7a1a7cc7dff7">co_list_element()</a>.</p>

<p>Referenced by <a class="el" href="crypto_8h.html#a6c8facf941938973d0d6a5f14a32ca9a">olsrd_mdp_sign_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="structsvl__crypto__ctx.html">svl_crypto_ctx</a> *ctx = svl_crypto_ctx_new();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment"></span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">  /** skipping some error checking for performance reasons */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">//   CHECK(IS_LIST(params) &amp;&amp; co_list_length(params) == 2, &quot;Invalid params&quot;);</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  ctx-&gt;msg_len = co_obj_data((<span class="keywordtype">char</span>**)&amp;ctx-&gt;msg, <a class="code" href="list_8c.html#a647ff4c713547b65d3fa7a1a7cc7dff7">co_list_element</a>(params, 1));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  memcpy(ctx-&gt;sas_private,_LIST_ELEMENT(params, 0),crypto_sign_SECRETKEYBYTES);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  CHECK(serval_create_signature(ctx), <span class="stringliteral">&quot;Failed to sign OLSRd packet&quot;</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  CMD_OUTPUT(<span class="stringliteral">&quot;sig&quot;</span>, co_bin8_create((<span class="keywordtype">char</span>*)ctx-&gt;signature, SIGNATURE_BYTES, 0));</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  ret = 1;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;error:</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  svl_crypto_ctx_free(ctx);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="ttc" id="structsvl__crypto__ctx_html"><div class="ttname"><a href="structsvl__crypto__ctx.html">svl_crypto_ctx</a></div><div class="ttdef"><b>Definition:</b> crypto.h:45</div></div>
<div class="ttc" id="list_8c_html_a647ff4c713547b65d3fa7a1a7cc7dff7"><div class="ttname"><a href="list_8c.html#a647ff4c713547b65d3fa7a1a7cc7dff7">co_list_element</a></div><div class="ttdeci">co_obj_t * co_list_element(co_obj_t *list, const unsigned int index)</div><div class="ttdoc">return item at specified position in list </div><div class="ttdef"><b>Definition:</b> list.c:483</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6c8facf941938973d0d6a5f14a32ca9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int olsrd_mdp_sign_register </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>name: mdp-sign param[0] &lt;required&gt;: key (co_bin8_t) param[1] &lt;required&gt;: data (co_bin?_t)</p>

<p>References <a class="el" href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a>, and <a class="el" href="crypto_8c.html#ab48f47676409eabe9da89f5df565fe38">olsrd_mdp_sign()</a>.</p>
<div class="fragment"><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">  /**</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">   * name: mdp-sign</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">   * param[0] &lt;required&gt;: key (co_bin8_t)</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">   * param[1] &lt;required&gt;: data (co_bin?_t)</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a>[] = <span class="stringliteral">&quot;mdp-sign&quot;</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  CHECK(co_cmd_register(name, <span class="keyword">sizeof</span>(name), <span class="stringliteral">&quot;&quot;</span>, 1, <span class="stringliteral">&quot;&quot;</span>, 1, <a class="code" href="crypto_8c.html#ab48f47676409eabe9da89f5df565fe38">olsrd_mdp_sign</a>), <span class="stringliteral">&quot;Failed to register command&quot;</span>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;error:</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="ttc" id="cmd_8h_html_a842efb72cde7678fc8a8162084b327ea"><div class="ttname"><a href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a></div><div class="ttdeci">co_obj_t * name</div><div class="ttdef"><b>Definition:</b> cmd.h:60</div></div>
<div class="ttc" id="crypto_8c_html_ab48f47676409eabe9da89f5df565fe38"><div class="ttname"><a href="crypto_8c.html#ab48f47676409eabe9da89f5df565fe38">olsrd_mdp_sign</a></div><div class="ttdeci">int olsrd_mdp_sign(co_obj_t *self, co_obj_t **output, co_obj_t *params)</div><div class="ttdef"><b>Definition:</b> crypto.c:572</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a699ccad43ec5415b695b70b74af369cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int serval_crypto_register </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>name: serval-crypto param[0] - param[3]: (co_str?_t)</p>

<p>References <a class="el" href="cmd_8h.html#ad8dfe6da143614c91598ec35c35bcc4f">desc</a>, <a class="el" href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a>, and <a class="el" href="cmd_8h.html#ace2987d249e38e296e66b62c88c629f9">usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{<span class="comment"></span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">  /** name: serval-crypto</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">   * param[0] - param[3]: (co_str?_t)</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a>[] = <span class="stringliteral">&quot;serval-crypto&quot;</span>,</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="cmd_8h.html#ace2987d249e38e296e66b62c88c629f9">usage</a>[] = <span class="stringliteral">&quot;serval-crypto sign [&lt;SID&gt;] &lt;MESSAGE&gt; [--keyring=&lt;KEYRING_PATH&gt;]\n&quot;</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="stringliteral">&quot;serval-crypto verify &lt;SAS&gt; &lt;SIGNATURE&gt; &lt;MESSAGE&gt;&quot;</span>,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="cmd_8h.html#ad8dfe6da143614c91598ec35c35bcc4f">desc</a>[] =  <span class="stringliteral">&quot;Serval-crypto utilizes Serval&#39;s crypto API to:\n&quot;</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="stringliteral">&quot;      * Sign any arbitrary text using a Serval key. If no Serval key ID (SID) is given,\n&quot;</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="stringliteral">&quot;             a new key will be created on the default Serval keyring.\n&quot;</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="stringliteral">&quot;      * Verify any arbitrary text, a signature, and a Serval signing key (SAS), and will\n&quot;</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="stringliteral">&quot;             determine if the signature is valid.&quot;</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordtype">int</span> reg_ret = co_cmd_register(name,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keyword">sizeof</span>(name),</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="cmd_8h.html#ace2987d249e38e296e66b62c88c629f9">usage</a>,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keyword">sizeof</span>(<a class="code" href="cmd_8h.html#ace2987d249e38e296e66b62c88c629f9">usage</a>),</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="cmd_8h.html#ad8dfe6da143614c91598ec35c35bcc4f">desc</a>,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keyword">sizeof</span>(<a class="code" href="cmd_8h.html#ad8dfe6da143614c91598ec35c35bcc4f">desc</a>),</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        serval_crypto_handler);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  CHECK(reg_ret, <span class="stringliteral">&quot;Failed to register commands&quot;</span>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;error:</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div>
<div class="ttc" id="cmd_8h_html_ace2987d249e38e296e66b62c88c629f9"><div class="ttname"><a href="cmd_8h.html#ace2987d249e38e296e66b62c88c629f9">usage</a></div><div class="ttdeci">co_obj_t * usage</div><div class="ttdef"><b>Definition:</b> cmd.h:61</div></div>
<div class="ttc" id="cmd_8h_html_ad8dfe6da143614c91598ec35c35bcc4f"><div class="ttname"><a href="cmd_8h.html#ad8dfe6da143614c91598ec35c35bcc4f">desc</a></div><div class="ttdeci">co_obj_t * desc</div><div class="ttdef"><b>Definition:</b> cmd.h:62</div></div>
<div class="ttc" id="cmd_8h_html_a842efb72cde7678fc8a8162084b327ea"><div class="ttname"><a href="cmd_8h.html#a842efb72cde7678fc8a8162084b327ea">name</a></div><div class="ttdeci">co_obj_t * name</div><div class="ttdef"><b>Definition:</b> cmd.h:60</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->

<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jun 6 2014 13:22:05 for commotiond by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
<script type="text/javascript" src="dynsections.js"></script>
</div>
